
{{what-page currentPage=currentPage page=thisPage}}

{{#form-for model wrapper="bs3-wrapper"}}
<div class="container-fluid haul-edit">
	<div class="row">
		

		{{!-- CAN EDIT PRODUCT --}}
		{{!-- CAN EDIT PRODUCT --}}
		{{!-- CAN EDIT PRODUCT --}}
		<div class="col-md-4 col-sm-4 col-xs-12">
		<div class="well">
		{{#if canEditProduct}}
			<div class="row">
				<div class="col-md-12 col-sm-12 col-xs-12">  
					<label>Item Name</label>
					{{input product_name placeholder="Item name" canShowValidationError=showErrors}} 
				</div>
			</div>
			<div class="row">
				<div class="col-md-12 col-sm-12 col-xs-12">  
					<label>Item Description</label>
					{{input product_description placeholder="Gives us the details. Size, color, condition, etc." as="text" canShowValidationError=showErrors }}
				</div> 
			</div>
			<div class="row">
				<div class="col-md-6 col-sm-6 col-xs-6"> 

					<label>Quantity</label>
					{{input product_quantity class="input-xs" placeholder="quantity" canShowValidationError=showErrors}}
				</div>

				<div class="col-md-6 col-sm-6 col-xs-6"> 
					<label>Status:</label>
						{{view "select"
					       content = product_status_options.status
					       optionLabelPath = "content.name"
					       optionValuePath = "content.id"
					       selection = product_status_options.selectedStatus
					       class = "form-control"
					    }}
					    {{#if showErrors}}<span class="has-error help-block">{{error-field product_status}}</span>{{/if}}
		 		</div>
			</div>
			<div class="row">
				<div class="col-md-12 col-sm-12 col-xs-12"> 
					<label>Price</label>
					{{#input product_price}}
					<div class="input-group">
						<span class="input-group-addon">$</span>
					  	{{input-field product_price class="form-control input-sm" canShowValidationError=showErrors}}
					  	<br/>
					</div>
					{{#if showErrors}}<span class="has-error help-block">{{error-field product_price}}</span>{{/if}}
					{{/input}}
 				</div>
			</div>

		{{else}}


			<div class="row">
				<div class="col-md-12 col-sm-12 col-xs-12">  
					<label>Seller</label>
					<span class="profile-badge">
						{{ make-icon icon=product_user.icon isSmall=true }}
						{{#link-to 'profile' user }}{{product_user.username}}{{/link-to}}
					</span>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12 col-sm-12 col-xs-12">  
					<label>Item Name</label>
					{{product_name}}
				</div>
			</div>
			<div class="row">
				<div class="col-md-12 col-sm-12 col-xs-12"> 

					<label>Quantity</label>
					{{product_quantity}}
				</div>
			</div>
			<div class="row">
				<div class="col-md-12 col-sm-12 col-xs-12"> 
					<label>Status</label>
					{{product_status_options.selectedStatus.name}}
		 		</div>
			</div>
			<div class="row">
				<div class="col-md-12 col-sm-12 col-xs-12"> 
					<label>Price</label>
					{{product_price}}
 				</div>
			</div>
			<div class="row">
				<div class="col-md-12 col-sm-12 col-xs-12">  
					<label>Description</label>
					{{product_description}}
				</div> 
			</div>

 		{{/if}}

		</div> 
		</div> 


		<div class="col-md-8 col-sm-8 col-xs-12"> 

			<div class="row">
				<div class="col-md-12 col-sm-12 col-xs-12"> 
					<label>Post Title:</label>
					{{input subject canShowValidationError=showErrors}} 
				</div>
			</div>	

			<div class="gallery-wrapper"> 
				<div class="gallery"> 
					<div class="gallery-inside">
						
						{{#if canEditProduct}}
						<button {{action 'showImageModal'}} class="btn btn-default">
							<span class="glyphicon glyphicon-picture"></span>
						</button>
						{{/if}}

						{{#each selectedImages}} 
							<img {{bind-attr src=small}}> 
						{{/each}}
					</div>
				</div>
			</div>


			{{quill-editor content=editorialForQuill  quillChange='quillChange'}}
			{{#if showErrors}}<span class="has-error help-block">{{error-field body}}</span>{{/if}}			
		</div>

	</div>

	<div class="row">
		<div {{bind-attr class=":col-md-12 :col-sm-12 :col-xs-12 :toolbar-footer"}}>	

			<button {{action 'cancel'}} class="btn btn-default btn-left">
				cancel
			</button>
			
			{{ladda-btn
				name='post'
				class="display-inline"
				btnClasses='btn btn-primary  ladda-button'
				btnClick='savePost'
				spin=isProcessing
			}}

		</div> 
	</div>
</div>
{{/form-for}} 
 


 <div {{bind-attr class=":modal :fade showImageModal:in:out  showImageModal:show:hide"}}>
	<div class="modal-dialog text-left haul-edit">
		<div class="modal-content">
			<div class="modal-header">
				<button {{action 'closeImageModal'}} type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="myModalLabel">Add Images</h4>
			</div>
		<div class="modal-body">

			{{image-picker 
				images=userImages
				selectedImages=selectedImages
				refresh='refresh'
				imageClick='imageClick' 
				imageDeleted='imageDeleted'
				Haul=Haul
			}}


      </div>
      <div class="modal-footer">


      	<div {{bind-attr class="postComplete:hide:show"}}>
	        <button {{action 'closeImageModal'}} type="button" class="btn btn-default" data-dismiss="modal">done</button> 
		</div>

      </div>
    </div>
  </div>
</div>

